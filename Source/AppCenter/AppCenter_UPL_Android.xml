<?xml version="1.0" encoding="utf-8"?>
<!-- AppCenter plugin additions-->
<root xmlns:android="http://schemas.android.com/apk/res/android">
  <init>
    <log text="AppCenter Android Initialization"/>
    <setBoolFromProperty result="bEnableAppCenter" ini="Engine" section="/Script/AppCenter.AppCenterSettings" property="bEnableAppCenter" default="true"/>
    <setStringFromProperty result="AppSecret" ini="Engine" section="/Script/AppCenter.AppCenterSettings" property="AppSecret" default=""/>
  </init>

  <androidManifestUpdates>
  </androidManifestUpdates>

  <proguardAdditions>
  </proguardAdditions>

  <buildGradleAdditions>
    <if condition="bEnableAppCenter">
      <true>
        <insert>
          dependencies {
            def appCenterSdkVersion = '1.11.4'
            implementation "com.microsoft.appcenter:appcenter-analytics:${appCenterSdkVersion}"
            implementation "com.microsoft.appcenter:appcenter-crashes:${appCenterSdkVersion}"
            implementation "com.microsoft.appcenter:appcenter-distribute:${appCenterSdkVersion}"
          }
        </insert>
      </true>
    </if>
  </buildGradleAdditions>

  <gameActivityImportAdditions>
    <if condition="bEnableAppCenter">
      <true>
        <insert>
          import com.microsoft.appcenter.AppCenter;
          import com.microsoft.appcenter.analytics.Analytics;
          import com.microsoft.appcenter.crashes.Crashes;
          import com.microsoft.appcenter.distribute.Distribute;
        </insert>
      </true>
    </if>
  </gameActivityImportAdditions>

  <gameActivityClassAdditions>
    <if condition="bEnableAppCenter">
      <true>
        <insert>
         
        </insert>
      </true>
    </if>
  </gameActivityClassAdditions>

  <gameActivityOnCreateAdditions>
    <if condition="bEnableAppCenter">
      <true>
        <insertValue value="        String appToken = &quot;$S(AppSecret)&quot;;" />
        <insertNewline/>
        <insert>
          AppCenter.start(getApplication(), appToken, Analytics.class);
          AppCenter.start(getApplication(), appToken, Crashes.class);
          AppCenter.start(getApplication(), appToken, Distribute.class);

          Analytics.trackEvent("My custom event");
        </insert>
      </true>
    </if>
  </gameActivityOnCreateAdditions>

</root>
